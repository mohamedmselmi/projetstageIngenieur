
@{
    ViewBag.Title = "Catalogue";

}
@using RegistrationAndLogin.Models;
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<div class="content">
    <div class="container">
        <nav class="navbar navbar-light justify-content-center mt-4">
            <form class="form-inline">
                <input class="form-control mr-sm-2" type="search" placeholder="Type a name" aria-label="Search" id="search">
                <!-- <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> -->
            </form>
        </nav>

        <!-- Cards -->
        <div class="layout-margin-8 mt-5">
            <div class="card" id="ss">
                <div class="row" id="myItems">
                    @foreach (var data in ViewBag.listeCategorie)
                    {





                        foreach (var produit in data.Prod)
                        {
                            if (@produit.status != "resolu")
                            { 
                            string path = "~/Fichier/" + @produit.IMAGE_PRODUIT;
                                <div class="col-lg-4">
                                    <div class="card card-shadow text-center">
                                        <div class="text-center card-body">
                                            @if (@produit.remise != 0 && DateTime.Parse(DateTime.Now.Day.ToString() + "/" + DateTime.Now.Month.ToString() + "/" + DateTime.Now.Year.ToString()) - DateTime.Parse(@produit.datedebut.Day.ToString() + "/" + @produit.datedebut.Month.ToString() + "/" + @produit.datedebut.Year.ToString()) <= DateTime.Parse(@produit.datefin.Day.ToString() + "/" + @produit.datefin.Month.ToString() + "/" + @produit.datefin.Year.ToString()) - DateTime.Parse(@produit.datedebut.Day.ToString() + "/" + @produit.datedebut.Month.ToString() + "/" + @produit.datedebut.Year.ToString()))
                                            {
                                                <span class="badge badge-success">remise @produit.remise %</span>

                                            }

                                            else
                                            {



                                            }
                                            <br />
                                            <img src="@Url.Content(path)" width="80" height="80"><br />
                                            <h4 class="card-title" style="margin-left:100px;">@produit.LIBELLE_PRODUIT</h4>

                                            <div class="">

                                                <br /><br /><br />
                                                <div class="row">
                                                    <p class="text-muted">
                                                        @produit.type <span>| </span><span>
                                                            <a href="#" class="text-pink">
                                                                @using (MyDatabaseEntities24 dc = new MyDatabaseEntities24())
                                                                {
                                                                    foreach (var t in dc.Users.ToList())
                                                                    {

                                                                        if (t.IdUser == produit.IdUser)
                                                                        {
                                                                            @t.EmailID
                                                                        }

                                                                    }
                                                                }
                                                            </a>
                                                        </span>
                                                    </p>
                                                </div>

                                            </div>
                                            <ul class="social-links list-inline">
                                                <li class="list-inline-item"><a title="" data-placement="top" data-toggle="tooltip" class="tooltips" href="" data-original-title="Facebook"><i class="fa fa-facebook"></i></a></li>
                                                <li class="list-inline-item"><a title="" data-placement="top" data-toggle="tooltip" class="tooltips" href="" data-original-title="Twitter"><i class="fa fa-twitter"></i></a></li>
                                                <li class="list-inline-item"><a title="" data-placement="top" data-toggle="tooltip" class="tooltips" href="" data-original-title="Skype"><i class="fa fa-skype"></i></a></li>
                                            </ul>
                                            <a href="#myModal-@produit.CODE_PRODUIT" class="trigger-btn" data-toggle="modal"><i class="btn btn-danger">Details</i></a>

                                            <div id="myModal-@produit.CODE_PRODUIT" class="modal hide fade">
                                                <div class="modal-dialog modal-confirm">
                                                    <div class="modal-content">
                                                        <div class="modal-header">

                                                            <h4 class="modal-title w-100">
                                                                Détails
                                                            </h4>
                                                        </div>
                                                        <div class="modal-body">

                                                            <div class="card mb-3" style="max-width: 540px;">
                                                                <div class="row no-gutters">
                                                                    <div class="col-md-12">
                                                                        <img src="@Url.Content(path)" width="120" height="120"><br />
                                                                    </div>
                                                                    <div class="col-md-12">
                                                                        <div class="card-body">
                                                                            <div class="card mb-3">
                                                                                <div class="card-body">
                                                                                    <div class="row">
                                                                                        <div class="col-sm-3">
                                                                                            <h6 class="mb-0">Produit</h6>
                                                                                        </div>
                                                                                        <div class="col-sm-9 text-secondary">
                                                                                            @produit.LIBELLE_PRODUIT
                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>
                                                                                    <div class="row">
                                                                                        <div class="col-sm-3">
                                                                                            <h6 class="mb-0">Categorie</h6>
                                                                                        </div>
                                                                                        <div class="col-sm-9 text-secondary">
                                                                                            @produit.Categories.LIBELLE_CATEGORIE
                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>
                                                                                    <div class="row">
                                                                                        <div class="col-sm-3">
                                                                                            <h6 class="mb-0">Prix</h6>
                                                                                        </div>
                                                                                        <div class="col-sm-9 text-secondary">
                                                                                            @produit.Prix
                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>

                                                                                    @if (@produit.remise != 0)
                                                                                    {
                                                                                        <hr>
                                                                                        <div class="row">
                                                                                            <div class="col-sm-3">
                                                                                                <h6 class="mb-0">datedebut remise</h6>
                                                                                            </div>
                                                                                            <div class="col-sm-9 text-secondary">
                                                                                                @produit.datedebut.ToString("yyyy-MM-dd")
                                                                                            </div>
                                                                                        </div>
                                                                                        <hr>
                                                                                        <div class="row">
                                                                                            <div class="col-sm-3">
                                                                                                <h6 class="mb-0">datefin remise </h6>
                                                                                            </div>
                                                                                            <div class="col-sm-9 text-secondary">
                                                                                                @produit.datefin.ToString("yyyy-MM-dd")
                                                                                            </div>
                                                                                        </div>
                                                                                    }
                                                                                    <hr>
                                                                                    <div class="row">
                                                                                        <div class="col-sm-3">
                                                                                            <h6 class="mb-0">type annonce</h6>
                                                                                        </div>
                                                                                        <div class="col-sm-9 text-secondary">
                                                                                            @produit.type
                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>
                                                                                    <div class="row">
                                                                                        <div class="col-sm-3">
                                                                                            <h6 class="mb-0">Mobile</h6>
                                                                                        </div>
                                                                                        <div class="col-sm-9 text-secondary">
                                                                                            @using (MyDatabaseEntities24 dc = new MyDatabaseEntities24())
                                                                                            {
                                                                                                foreach (var t in dc.Users.ToList())
                                                                                                {

                                                                                                    if (t.IdUser == produit.IdUser)
                                                                                                    {
                                                                                                        @t.numtelephone
                                                                                                    }

                                                                                                }
                                                                                            }

                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>
                                                                                    <div class="row">
                                                                                        <div class="col-sm-3">
                                                                                            <h6 class="mb-0">Email</h6>
                                                                                        </div>
                                                                                        <div class="col-sm-9 text-secondary">
                                                                                            @using (MyDatabaseEntities24 dc = new MyDatabaseEntities24())
                                                                                            {
                                                                                                foreach (var t in dc.Users.ToList())
                                                                                                {

                                                                                                    if (t.IdUser == produit.IdUser)
                                                                                                    {
                                                                                                        @t.EmailID
                                                                                                    }

                                                                                                }
                                                                                            }

                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-success" data-dismiss="modal">ok</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <div class="row">
                                                    <div class="col-4">
                                                        <div class="mt-3">
                                                            <h5>@produit.Prix</h5>
                                                            <p class="mb-0 text-muted">Prix</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-4">
                                                        <div class="mt-3">
                                                            <h6>@produit.Categories.LIBELLE_CATEGORIE</h6>
                                                            <p class="mb-0 text-muted">Categorie</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-4">
                                                        <div class="mt-3">

                                                            <h5>@produit.vu</h5>
                                                            <p class="mb-0 text-muted">Total Vus</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }

                    }
                </div>    


            </div>
        </div>
    </div>
    <br /> <br />
    <nav>
        <ul class="pagination pg-red">

            <!--Numbers-->
            <li class="page-item"><a class="page-link">1</a></li>
            <li class="page-item"><a class="page-link">2</a></li>
            <li class="page-item"><a class="page-link">3</a></li>
            <li class="page-item"><a class="page-link">4</a></li>

        </ul>
    </nav>
    @section scripts
{
        <script>
            $('#search').keyup(function () {
                $('.card').removeClass('d-none');
                var filter = $(this).val(); // get the value of the input, which we filter on
                $('#ss').find('.card .card-body h4:not(:contains("' + filter + '"))').parent().parent().addClass('d-none');
            })
        </script>
        <script type="text/javascript">
            $(document).ready(function () {

                //Hide all cards
                $(".card").each(function (index, value) {
                //   $('.card').hide();
                })


                $(".page-link").on('click', function () {



           
                    
                });

            });
        </script>



    }

    <!-- end col -->
    <!-- end col -->
    <!-- end col -->
</div>
<!-- end row -->
<!-- end row -->
<!-- end row -->
<!-- end row -->
</div>
<!-- container -->

<style>
    body {
        background: #DCDCDC;
        margin-top: 20px;
    }

    .card-box {
        padding: 20px;
        border-radius: 3px;
        margin-bottom: 30px;
        background-color: #fff;
    }

    .social-links li a {
        border-radius: 50%;
        color: rgba(121, 121, 121, .8);
        display: inline-block;
        height: 30px;
        line-height: 27px;
        border: 2px solid rgba(121, 121, 121, .5);
        text-align: center;
        width: 30px
    }

        .social-links li a:hover {
            color: #797979;
            border: 2px solid #797979
        }

    .thumb-lg {
        height: 88px;
        width: 88px;
    }

    .img-thumbnail {
        padding: .25rem;
        background-color: #fff;
        border: 1px solid #dee2e6;
        border-radius: .25rem;
        max-width: 100%;
        height: auto;
    }

    .text-pink {
        color: #ff679b !important;
    }

    .btn-rounded {
        border-radius: 2em;
    }

    .text-muted {
        color: #98a6ad !important;
    }

    h4 {
        line-height: 22px;
        font-size: 18px;
    }
</style>